import React from 'react';
import './background-style.css';

export default class Background extends React.Component{

    componentWillReceiveProps(nextProps){
        requestAnimationFrame(_ => {
            this._updateColorsFromProps(nextProps);
        })
    }



    componentDidMount(){
        this._updateColorsFromProps(this.props);
    }

    _updateColorsFromProps(props){
        const {fgGradientStart, fgGradientEnd, bgGradientStart, bgGradientEnd, progress} = props;

        this._updateGradients(fgGradientStart, fgGradientEnd, bgGradientStart, bgGradientEnd);
        this._updateProgress(progress);
    }

    _updateProgress(progress){
        this.hostElement.style.setProperty('--progress', progress);
    }

    _updateGradients(fgGradientStart, fgGradientEnd, bgGradientStart, bgGradientEnd){
        this.hostElement.style.setProperty('--foreground-gradient-start', fgGradientStart);
        this.hostElement.style.setProperty('--foreground-gradient-end', fgGradientEnd);

        this.hostElement.style.setProperty('--background-gradient-start', bgGradientStart);
        this.hostElement.style.setProperty('--background-gradient-end', bgGradientEnd);
    }

    render(){
        return(
            <div className="ah-background" ref={ref => this.hostElement = ref}>
                <div className="ah-background--outer-wrapper">

                    <div className="ah-background--background-gradient"></div>
                    <div className="ah-background--foreground-gradient"></div>
                    <div className="ah-twinkle ah-twinkle--pos-right-upper"></div>
                    <div className="ah-twinkle ah-twinkle--pos-middle"></div>
                    <div className="ah-twinkle ah-twinkle--pos-top-middle"></div>
                    <div className="ah-twinkle ah-twinkle--pos-lower-left"></div>
                    <div className="ah-background--inner-wrapper">
                        <svg  version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <pattern id="ah-background-svg-star-pattern" x="0" y="0" width=".3" height=".7">
                                    <rect fill="#ffffff" width="100%" height="100%" />
                                    <g fill="#000000">
                                        <path id="stars-path"d="M56.487442,25.5463634 C55.3572919,25.5463634 54.4411242,24.506591 54.4411242,23.2239668 C54.4411242,21.9413425 55.3572919,20.9015701 56.487442,20.9015701 C57.6175921,20.9015701 58.5337598,21.9413425 58.5337598,23.2239668 C58.5337598,24.506591 57.6175921,25.5463634 56.487442,25.5463634 Z M280.763876,4.64479335 C279.633726,4.64479335 278.717558,3.60502094 278.717558,2.32239668 C278.717558,1.03977241 279.633726,0 280.763876,0 C281.894026,0 282.810194,1.03977241 282.810194,2.32239668 C282.810194,3.60502094 281.894026,4.64479335 280.763876,4.64479335 Z M71.0162986,67.3495036 C70.4512235,67.3495036 69.9931397,66.8296174 69.9931397,66.1883053 C69.9931397,65.5469931 70.4512235,65.0271069 71.0162986,65.0271069 C71.5813737,65.0271069 72.0394575,65.5469931 72.0394575,66.1883053 C72.0394575,66.8296174 71.5813737,67.3495036 71.0162986,67.3495036 Z M107.850019,20.9015701 C107.284944,20.9015701 106.826861,20.3816839 106.826861,19.7403717 C106.826861,19.0990596 107.284944,18.5791734 107.850019,18.5791734 C108.415095,18.5791734 108.873178,19.0990596 108.873178,19.7403717 C108.873178,20.3816839 108.415095,20.9015701 107.850019,20.9015701 Z M135.066047,164.890164 C133.935896,164.890164 133.019729,163.850392 133.019729,162.567767 C133.019729,161.285143 133.935896,160.245371 135.066047,160.245371 C136.196197,160.245371 137.112364,161.285143 137.112364,162.567767 C137.112364,163.850392 136.196197,164.890164 135.066047,164.890164 Z M335.605194,66.4205449 C334.475044,66.4205449 333.558876,65.3807725 333.558876,64.0981483 C333.558876,62.815524 334.475044,61.7757516 335.605194,61.7757516 C336.735344,61.7757516 337.651511,62.815524 337.651511,64.0981483 C337.651511,65.3807725 336.735344,66.4205449 335.605194,66.4205449 Z M87.3868412,113.797437 C86.8217661,113.797437 86.3636823,113.277551 86.3636823,112.636239 C86.3636823,111.994927 86.8217661,111.47504 87.3868412,111.47504 C87.9519163,111.47504 88.4100001,111.994927 88.4100001,112.636239 C88.4100001,113.277551 87.9519163,113.797437 87.3868412,113.797437 Z M107.850019,109.152644 C107.284944,109.152644 106.826861,108.632758 106.826861,107.991445 C106.826861,107.350133 107.284944,106.830247 107.850019,106.830247 C108.415095,106.830247 108.873178,107.350133 108.873178,107.991445 C108.873178,108.632758 108.415095,109.152644 107.850019,109.152644 Z M183.359147,76.6390903 C182.228997,76.6390903 181.312829,75.5993179 181.312829,74.3166936 C181.312829,73.0340694 182.228997,71.994297 183.359147,71.994297 C184.489297,71.994297 185.405465,73.0340694 185.405465,74.3166936 C185.405465,75.5993179 184.489297,76.6390903 183.359147,76.6390903 Z M283.833353,118.44223 C283.268278,118.44223 282.810194,117.922344 282.810194,117.281032 C282.810194,116.63972 283.268278,116.119834 283.833353,116.119834 C284.398428,116.119834 284.856512,116.63972 284.856512,117.281032 C284.856512,117.922344 284.398428,118.44223 283.833353,118.44223 Z M234.721725,71.994297 C234.15665,71.994297 233.698566,71.4744108 233.698566,70.8330986 C233.698566,70.1917865 234.15665,69.6719003 234.721725,69.6719003 C235.2868,69.6719003 235.744884,70.1917865 235.744884,70.8330986 C235.744884,71.4744108 235.2868,71.994297 234.721725,71.994297 Z M124.425194,439.397451 C123.295044,439.397451 122.378876,438.357679 122.378876,437.075054 C122.378876,435.79243 123.295044,434.752658 124.425194,434.752658 C125.555344,434.752658 126.471512,435.79243 126.471512,437.075054 C126.471512,438.357679 125.555344,439.397451 124.425194,439.397451 Z M197.888004,206.693304 C197.322929,206.693304 196.864845,206.173418 196.864845,205.532106 C196.864845,204.890794 197.322929,204.370907 197.888004,204.370907 C198.453079,204.370907 198.911163,204.890794 198.911163,205.532106 C198.911163,206.173418 198.453079,206.693304 197.888004,206.693304 Z M234.721725,160.245371 C234.15665,160.245371 233.698566,159.725484 233.698566,159.084172 C233.698566,158.44286 234.15665,157.922974 234.721725,157.922974 C235.2868,157.922974 235.744884,158.44286 235.744884,159.084172 C235.744884,159.725484 235.2868,160.245371 234.721725,160.245371 Z M58.808424,208.93465 C58.8478656,210.064112 57.8407004,211.016009 56.5588575,211.060772 C55.2770146,211.105535 54.2059018,210.226213 54.1664601,209.096751 C54.1270184,207.96729 55.1341836,207.015393 56.4160266,206.97063 C57.6978695,206.925867 58.7689823,207.805189 58.808424,208.93465 Z M289.29398,393.877062 C289.333422,395.006523 288.326257,395.95842 287.044414,396.003183 C285.762571,396.047946 284.691458,395.168624 284.652016,394.039162 C284.612575,392.909701 285.61974,391.957804 286.901583,391.913041 C288.183426,391.868278 289.254539,392.7476 289.29398,393.877062 Z M96.3584244,276.596737 C96.3781452,277.161468 95.8745626,277.637416 95.2336411,277.659798 C94.5927197,277.682179 94.0571633,277.242518 94.0374424,276.677787 C94.0177216,276.113056 94.5213042,275.637108 95.1622257,275.614726 C95.8031471,275.592345 96.3387035,276.032006 96.3584244,276.596737 Z M109.01051,205.491581 C109.030231,206.056311 108.526649,206.53226 107.885727,206.554641 C107.244806,206.577023 106.709249,206.137362 106.689529,205.572631 C106.669808,205.0079 107.17339,204.531952 107.814312,204.50957 C108.455233,204.487189 108.99079,204.92685 109.01051,205.491581 Z M137.387029,348.278451 C137.42647,349.407913 136.419305,350.35981 135.137462,350.404573 C133.855619,350.449336 132.784506,349.570014 132.745065,348.440552 C132.705623,347.31109 133.712788,346.359193 134.994631,346.31443 C136.276474,346.269667 137.347587,347.148989 137.387029,348.278451 Z M337.926176,249.808832 C337.965617,250.938294 336.958452,251.890191 335.676609,251.934954 C334.394766,251.979717 333.323653,251.100394 333.284212,249.970933 C333.24477,248.841471 334.251935,247.889574 335.533778,247.844811 C336.815621,247.800048 337.886734,248.67937 337.926176,249.808832 Z M88.5473322,298.387448 C88.567053,298.952178 88.0634704,299.428127 87.4225489,299.450508 C86.7816275,299.47289 86.2460711,299.033229 86.2263502,298.468498 C86.2066294,297.903767 86.710212,297.427819 87.3511335,297.405437 C87.9920549,297.383056 88.5276113,297.822717 88.5473322,298.387448 Z M109.01051,293.742654 C109.030231,294.307385 108.526649,294.783334 107.885727,294.805715 C107.244806,294.828097 106.709249,294.388436 106.689529,293.823705 C106.669808,293.258974 107.17339,292.783025 107.814312,292.760644 C108.455233,292.738262 108.99079,293.177923 109.01051,293.742654 Z M185.680129,260.027377 C185.719571,261.156839 184.712406,262.108736 183.430563,262.153499 C182.14872,262.198262 181.077607,261.31894 181.038165,260.189478 C180.998724,259.060017 182.005889,258.108119 183.287732,258.063356 C184.569575,258.018594 185.640688,258.897916 185.680129,260.027377 Z M284.993844,303.032241 C285.013564,303.596972 284.509982,304.07292 283.86906,304.095302 C283.228139,304.117683 282.692582,303.678022 282.672862,303.113291 C282.653141,302.548561 283.156723,302.072612 283.797645,302.050231 C284.438566,302.027849 284.974123,302.46751 284.993844,303.032241 Z M235.882216,256.584307 C235.901937,257.149038 235.398354,257.624987 234.757432,257.647368 C234.116511,257.66975 233.580955,257.230089 233.561234,256.665358 C233.541513,256.100627 234.045096,255.624679 234.686017,255.602297 C235.326938,255.579916 235.862495,256.019577 235.882216,256.584307 Z M54.3766936,353.00288 C54.4161353,354.132342 53.4089701,355.084239 52.1271272,355.129002 C50.8452842,355.173765 49.7741714,354.294443 49.7347298,353.164981 C49.6952881,352.035519 50.7024533,351.083622 51.9842962,351.038859 C53.2661392,350.994096 54.337252,351.873418 54.3766936,353.00288 Z M23.2039085,612.648243 C23.2039085,613.778393 22.1641361,614.694561 20.8815118,614.694561 C19.5988876,614.694561 18.5591151,613.778393 18.5591151,612.648243 C18.5591151,611.518093 19.5988876,610.601925 20.8815118,610.601925 C22.1641361,610.601925 23.2039085,611.518093 23.2039085,612.648243 Z M4.78704806,358.113567 C4.78704806,359.243718 3.74727565,360.159885 2.46465138,360.159885 C1.18202711,360.159885 0.142254704,359.243718 0.142254704,358.113567 C0.142254704,356.983417 1.18202711,356.06725 2.46465138,356.06725 C3.74727565,356.06725 4.78704806,356.983417 4.78704806,358.113567 Z M59.89959,596.159227 C59.89959,596.724302 59.3797038,597.182386 58.7383916,597.182386 C58.0970795,597.182386 57.5771933,596.724302 57.5771933,596.159227 C57.5771933,595.594152 58.0970795,595.136068 58.7383916,595.136068 C59.3797038,595.136068 59.89959,595.594152 59.89959,596.159227 Z M18.9732334,554.356087 C18.9732334,554.921162 18.4533472,555.379245 17.8120351,555.379245 C17.170723,555.379245 16.6508367,554.921162 16.6508367,554.356087 C16.6508367,553.791011 17.170723,553.332928 17.8120351,553.332928 C18.4533472,553.332928 18.9732334,553.791011 18.9732334,554.356087 Z M145.982978,523.468211 C145.982978,524.598361 144.943206,525.514529 143.660581,525.514529 C142.377957,525.514529 141.338185,524.598361 141.338185,523.468211 C141.338185,522.338061 142.377957,521.421893 143.660581,521.421893 C144.943206,521.421893 145.982978,522.338061 145.982978,523.468211 Z M59.2191023,295.873337 C59.2191023,297.003487 58.1793298,297.919654 56.8967056,297.919654 C55.6140813,297.919654 54.5743089,297.003487 54.5743089,295.873337 C54.5743089,294.743186 55.6140813,293.827019 56.8967056,293.827019 C58.1793298,293.827019 59.2191023,294.743186 59.2191023,295.873337 Z M100.825947,577.580053 C100.825947,578.145128 100.30606,578.603212 99.6647482,578.603212 C99.023436,578.603212 98.5035498,578.145128 98.5035498,577.580053 C98.5035498,577.014978 99.023436,576.556894 99.6647482,576.556894 C100.30606,576.556894 100.825947,577.014978 100.825947,577.580053 Z M96.7333109,554.356087 C96.7333109,554.921162 96.2134246,555.379245 95.5721125,555.379245 C94.9308004,555.379245 94.4109142,554.921162 94.4109142,554.356087 C94.4109142,553.791011 94.9308004,553.332928 95.5721125,553.332928 C96.2134246,553.332928 96.7333109,553.791011 96.7333109,554.356087 Z M103.010304,427.320988 C103.010304,428.451139 101.970531,429.367306 100.687907,429.367306 C99.4052828,429.367306 98.3655104,428.451139 98.3655104,427.320988 C98.3655104,426.190838 99.4052828,425.274671 100.687907,425.274671 C101.970531,425.274671 103.010304,426.190838 103.010304,427.320988 Z M203.141838,299.356932 C203.141838,299.922007 202.621952,300.38009 201.98064,300.38009 C201.339327,300.38009 200.819441,299.922007 200.819441,299.356932 C200.819441,298.791856 201.339327,298.333773 201.98064,298.333773 C202.621952,298.333773 203.141838,298.791856 203.141838,299.356932 Z M203.141838,313.291312 C203.141838,313.856387 202.621952,314.314471 201.98064,314.314471 C201.339327,314.314471 200.819441,313.856387 200.819441,313.291312 C200.819441,312.726237 201.339327,312.268153 201.98064,312.268153 C202.621952,312.268153 203.141838,312.726237 203.141838,313.291312 Z M63.9922256,410.367493 C63.9922256,410.932568 63.4723394,411.390652 62.8310273,411.390652 C62.1897151,411.390652 61.6698289,410.932568 61.6698289,410.367493 C61.6698289,409.802418 62.1897151,409.344334 62.8310273,409.344334 C63.4723394,409.344334 63.9922256,409.802418 63.9922256,410.367493 Z M387.857745,535.544673 C387.857745,536.674824 386.817973,537.590991 385.535349,537.590991 C384.252724,537.590991 383.212952,536.674824 383.212952,535.544673 C383.212952,534.414523 384.252724,533.498356 385.535349,533.498356 C386.817973,533.498356 387.857745,534.414523 387.857745,535.544673 Z M100.825947,506.514715 C100.825947,507.07979 100.30606,507.537874 99.6647482,507.537874 C99.023436,507.537874 98.5035498,507.07979 98.5035498,506.514715 C98.5035498,505.94964 99.023436,505.491556 99.6647482,505.491556 C100.30606,505.491556 100.825947,505.94964 100.825947,506.514715 Z M141.752303,410.367493 C141.752303,410.932568 141.232417,411.390652 140.591105,411.390652 C139.949793,411.390652 139.429906,410.932568 139.429906,410.367493 C139.429906,409.802418 139.949793,409.344334 140.591105,409.344334 C141.232417,409.344334 141.752303,409.802418 141.752303,410.367493 Z M184.505888,610.327261 C185.635349,610.28782 186.587246,611.294985 186.632009,612.576828 C186.676772,613.858671 185.79745,614.929783 184.667988,614.969225 C183.538527,615.008667 182.58663,614.001502 182.541867,612.719659 C182.497104,611.437816 183.376426,610.366703 184.505888,610.327261 Z M347.462955,348.74576 C348.592417,348.706318 349.544314,349.713483 349.589077,350.995326 C349.63384,352.277169 348.754518,353.348282 347.625056,353.387724 C346.495595,353.427165 345.543698,352.42 345.498935,351.138157 C345.454172,349.856314 346.333494,348.785201 347.462955,348.74576 Z M168.961712,471.031426 C169.526443,471.011705 170.002391,471.515288 170.024773,472.156209 C170.047154,472.797131 169.607493,473.332687 169.042763,473.352408 C168.478032,473.372129 168.002083,472.868546 167.979702,472.227625 C167.95732,471.586703 168.396981,471.051147 168.961712,471.031426 Z M181.476936,553.195596 C182.041667,553.175875 182.517615,553.679457 182.539997,554.320379 C182.562378,554.9613 182.122717,555.496857 181.557986,555.516578 C180.993256,555.536298 180.517307,555.032716 180.494926,554.391794 C180.472544,553.750873 180.912205,553.215316 181.476936,553.195596 Z M307.284957,521.147229 C308.414419,521.107787 309.366316,522.114952 309.411079,523.396795 C309.455842,524.678638 308.57652,525.749751 307.447058,525.789193 C306.317596,525.828634 305.365699,524.821469 305.320936,523.539626 C305.276173,522.257783 306.155495,521.18667 307.284957,521.147229 Z M228.57189,467.083976 C229.701351,467.044534 230.653249,468.0517 230.698011,469.333543 C230.742774,470.615385 229.863452,471.686498 228.733991,471.72594 C227.604529,471.765382 226.652632,470.758216 226.607869,469.476373 C226.563106,468.194531 227.442428,467.123418 228.57189,467.083976 Z M195.87133,452.315846 C196.436061,452.296125 196.912009,452.799707 196.934391,453.440629 C196.956772,454.08155 196.517111,454.617107 195.95238,454.636828 C195.387649,454.656548 194.911701,454.152966 194.889319,453.512044 C194.866938,452.871123 195.306599,452.335567 195.87133,452.315846 Z M181.476936,464.944522 C182.041667,464.924801 182.517615,465.428384 182.539997,466.069305 C182.562378,466.710227 182.122717,467.245783 181.557986,467.265504 C180.993256,467.285225 180.517307,466.781642 180.494926,466.140721 C180.472544,465.499799 180.912205,464.964243 181.476936,464.944522 Z M313.564248,446.28642 C314.69371,446.246978 315.645607,447.254144 315.69037,448.535987 C315.735133,449.81783 314.855811,450.888942 313.726349,450.928384 C312.596888,450.967826 311.644991,449.96066 311.600228,448.678818 C311.555465,447.396975 312.434787,446.325862 313.564248,446.28642 Z M267.422285,353.469481 C267.987016,353.449761 268.462964,353.953343 268.485346,354.594265 C268.507727,355.235186 268.068066,355.770743 267.503335,355.790463 C266.938604,355.810184 266.462656,355.306602 266.440274,354.66568 C266.417893,354.024759 266.857554,353.489202 267.422285,353.469481 Z M226.495928,409.207002 C227.060659,409.187281 227.536608,409.690863 227.558989,410.331785 C227.581371,410.972706 227.14171,411.508263 226.576979,411.527984 C226.012248,411.547704 225.536299,411.044122 225.513918,410.4032 C225.491536,409.762279 225.931197,409.226723 226.495928,409.207002 Z M311.447762,615.356898 C312.577223,615.317456 313.529121,616.324622 313.573883,617.606465 C313.618646,618.888308 312.739324,619.95942 311.609863,619.998862 C310.480401,620.038304 309.528504,619.031138 309.483741,617.749296 C309.438978,616.467453 310.3183,615.39634 311.447762,615.356898 Z M54.6135407,484.683479 C54.6332615,485.24821 54.1296789,485.724158 53.4887575,485.74654 C52.847836,485.768921 52.3122796,485.32926 52.2925588,484.764529 C52.2728379,484.199799 52.7764205,483.72385 53.417342,483.701469 C54.0582635,483.679087 54.5938199,484.118748 54.6135407,484.683479 Z M235.882216,344.835381 C235.901937,345.400112 235.398354,345.876061 234.757432,345.898442 C234.116511,345.920823 233.580955,345.481162 233.561234,344.916432 C233.541513,344.351701 234.045096,343.875752 234.686017,343.853371 C235.326938,343.830989 235.862495,344.27065 235.882216,344.835381 Z"></path>
                                    </g>
                                </pattern>
                                <mask id="ah-background--svg-mask" maskUnits="userSpaceOnUse">
                                    <rect fill="url(#ah-background-svg-star-pattern)" width="100%" height="100%"/>  
                                </mask>
                                <radialGradient id="ah-background--svg-background-gradient" cx="100%" cy="110%" r="0.8">
                                    <stop className="start" offset="0%"/>
                                    <stop className="end" offset="100%"/>
                                </radialGradient>
                                <radialGradient id="ah-background--svg-foreground-gradient" cx="100%" cy="110%" r="0.8">
                                    <stop className="start" offset="0%"/>
                                    <stop className="end" offset="100%"/>
                                </radialGradient>
                            </defs>
                            
                            <rect mask="url(#ah-background--svg-mask)" className="ah-background--bg-rect" fill="url(#ah-background--svg-background-gradient)" height="100%" width="100%" />
                            <rect mask="url(#ah-background--svg-mask)" className="ah-background--fg-rect" fill="url(#ah-background--svg-foreground-gradient)" height="100%" width="100%" />
                        </svg>
                    </div>
                </div>
            </div>
        )
    }
}